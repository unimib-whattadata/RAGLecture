<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Building a RAG System with LangChain and ICD-11 Data</title>

    <!-- Reveal.js CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/theme/black.css" id="theme">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/monokai.css">

    <style>
        /* Custom styles for projector optimization and responsiveness */
        :root {
            --r-background-color: #1a1a2e; /* Darker background for projectors */
            --r-main-color: #e0e0e0; /* Lighter text for contrast */
            --r-link-color: #8be9fd; /* Bright cyan for links */
            --r-link-color-hover: #ff79c6; /* Pink for link hover */
            --r-heading-color: #f8f8f2; /* Light heading color */
            --r-code-background-color: #282a36; /* Dracula theme background for code */
            --r-code-font-size: 0.8em;
            --r-main-font-size: 1.0em; /* Base font size */
        }

        .reveal .slides {
            width: 100% !important;
            height: 100% !important;
            left: 0;
            top: 0;
            transform: none !important;
            margin-left: 0;
            margin-top: 0;
        }

        .reveal .slides section {
            padding: 20px;
            box-sizing: border-box;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* Auto-fit text for headings */
        .reveal h1.r-fit-text,
        .reveal h2.r-fit-text,
        .reveal h3.r-fit-text {
            font-size: 1.5em;
            line-height: 1.2;
            margin-bottom: 0.5em;
        }

        /* Improved code block styling */
        .reveal pre {
            background-color: var(--r-code-background-color);
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            padding: 15px;
            font-size: var(--r-code-font-size);
            max-width: 90%;
            max-height: 70vh; /* Limit height to 70% of viewport height */
            overflow: auto;
            text-align: left;
            margin: 10px auto;
        }

        .reveal pre code {
            max-height: 100%;
            overflow: auto;
            padding-right: 15px;
        }

        /* Improved scrollable content */
        .scrollable-content {
            max-height: 70vh;
            overflow-y: auto;
            padding: 15px;
            text-align: left;
            margin: 0 auto;
            width: 90%;
            background-color: rgba(0, 0, 0, 0.1);
            border-radius: 8px;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .reveal h1.r-fit-text { font-size: 1.4em; }
            .reveal h2.r-fit-text { font-size: 1.2em; }
            .reveal h3.r-fit-text { font-size: 1.1em; }
            .reveal p, .reveal li { font-size: 0.9em; }
            .reveal pre code { font-size: 0.7em; }
            .reveal .slides section { padding: 10px; }
            .scrollable-content { max-height: 65vh; }
        }

        /* List styling */
        .reveal ul, .reveal ol {
            text-align: left;
            margin: 0 auto;
            width: fit-content;
            max-width: 90%;
            padding-left: 20px;
        }

        .reveal li {
            margin-bottom: 0.5em;
            line-height: 1.4;
        }

        /* Image handling */
        .reveal img {
            max-width: 80%;
            max-height: 50vh;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
            margin: 10px auto;
        }
    </style>
</head>
<body>
    <div class="reveal">
        <div class="slides">

            <!-- Title Slide -->
            <section data-markdown>
                <textarea data-template>
                    # <span class="r-fit-text">Building a Retrieval Augmented Generation (RAG) System</span>
                    ## <span class="r-fit-text">with LangChain and ICD-11 Data</span>

                    ---
                    ### <span class="r-fit-text">By Gemini</span>
                    _Your AI Assistant_
                </textarea>
            </section>

            <!-- Objectives Slide -->
            <section>
                <h2 class="r-fit-text">Objectives</h2>
                <div class="scrollable-content">
                    <ul>
                        <li>Understand the concept of Retrieval Augmented Generation (RAG).</li>
                        <li>Learn how to acquire and preprocess external knowledge (ICD-11 data).</li>
                        <li>Utilize LangChain to integrate various components: Document Loaders, Text Splitters, Embedding Models, Vector Stores, and Language Models.</li>
                        <li>Build and query a simple RAG chain.</li>
                    </ul>
                </div>
            </section>

            <!-- New Section: Understanding ICD-11 -->
            <section>
                <h2>Understanding ICD-11</h2>
                <div class="scrollable-content">
                    <p>The International Classification of Diseases, 11th Revision (ICD-11), is a global standard for health data and clinical documentation. Developed by the World Health Organization (WHO), it provides a common language for reporting and monitoring diseases and health conditions.</p>
                    <p>ICD-11 is crucial for various applications, including:</p>
                    <ul>
                        <li>**Mortality and morbidity statistics:** Tracking health trends globally.</li>
                        <li>**Reimbursement and resource allocation:** Informing healthcare planning and funding.</li>
                        <li>**Clinical documentation:** Standardizing patient records for better data exchange.</li>
                        <li>**Research:** Enabling consistent data collection for medical studies.</li>
                    </ul>
                    <img src="https://placehold.co/600x300/364F6B/E0E0E0?text=ICD-11+Concept+Map" alt="ICD-11 Concept Map Placeholder">
                    <p>Unlike previous versions, ICD-11 is fully digital and features a more flexible, comprehensive structure, designed to be easier to use and more adaptable to modern healthcare needs.</p>
                </div>
            </section>

            <!-- New Section: Prerequisites & Key Files -->
            <section>
                <h2>Prerequisites & Key Files</h2>
                <div class="scrollable-content">
                    <h3>Environment Setup:</h3>
                    <ul>
                        <li>**Python 3.8+**: Essential for running the LangChain framework.</li>
                        <li>**Google API Key**: Required for accessing Google's generative AI models (Gemma, Embeddings). Obtainable from <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>.</li>
                    </ul>
                    <h3>Required Data:</h3>
                    <ul>
                        <li><code>icdchapter6.csv</code>: A CSV file containing ICD-11 data (codes, titles, definitions). This file is crucial for populating our knowledge base. Make sure it's accessible in your working directory.</li>
                    </ul>
                    <h3>Recommended Tools:</h3>
                    <ul>
                        <li>**Jupyter/Colab Notebook**: For interactive development and execution of the Python code.</li>
                        <li>**<code>.env</code> file (Optional but Recommended)**: To securely manage your API keys and other sensitive environment variables.</li>
                    </ul>
                </div>
            </section>

            <!-- New Section: Dependency Explanations -->
            <section>
                <h2>Key Dependencies</h2>
                <div class="scrollable-content">
                    <h3>1. <code>langchain</code></h3>
                    <ul>
                        <li>**What it is:** A framework for developing applications powered by language models.</li>
                        <li>**Why used:** Provides modular components to build sophisticated LLM applications, simplifying integration of models, data sources, and agents.</li>
                        <li>**Alternatives:** LlamaIndex, Haystack.</li>
                        <li>**Functionality:** Orchestration of LLMs, chains, agents, document loaders, text splitters, etc.</li>
                    </ul>
                    <h3>2. <code>langchain-community</code></h3>
                    <ul>
                        <li>**What it is:** Contains third-party integrations and community-contributed components for LangChain.</li>
                        <li>**Why used:** Accesses various document loaders, vector stores (like Chroma), and other tools.</li>
                        <li>**Alternatives:** Directly importing specific libraries if not using LangChain.</li>
                        <li>**Functionality:** Broadens LangChain's capabilities with a wide range of external tools.</li>
                    </ul>
                    <h3>3. <code>langchain-chroma</code></h3>
                    <ul>
                        <li>**What it is:** LangChain integration for ChromaDB, a popular open-source vector database.</li>
                        <li>**Why used:** Stores and retrieves document embeddings efficiently for RAG. Supports persistence to disk.</li>
                        <li>**Alternatives:** FAISS, Pinecone, Weaviate, Milvus.</li>
                        <li>**Functionality:** Vector storage, similarity search, document retrieval.</li>
                    </ul>
                    <h3>4. <code>langchain-google-genai</code></h3>
                    <ul>
                        <li>**What it is:** LangChain integration for Google's Generative AI models.</li>
                        <li>**Why used:** Allows seamless use of Google's LLMs (like Gemma) and embedding models.</li>
                        <li>**Alternatives:** <code>langchain-openai</code>, <code>langchain-huggingface</code>, etc., for different LLM providers.</li>
                        <li>**Functionality:** Connects LangChain to Google's AI services for text generation and embeddings.</li>
                    </ul>
                    <h3>5. <code>python-dotenv</code></h3>
                    <ul>
                        <li>**What it is:** A Python library for reading key-value pairs from a `.env` file and setting them as environment variables.</li>
                        <li>**Why used:** Securely manages API keys and other sensitive configurations without hardcoding them in the script.</li>
                        <li>**Alternatives:** Manual environment variable setup, OS-level environment variables.</li>
                        <li>**Functionality:** Loads environment variables from a file.</li>
                    </ul>
                    <h3>6. <code>requests</code></h3>
                    <ul>
                        <li>**What it is:** A widely used HTTP library for Python.</li>
                        <li>**Why used:** Facilitates making HTTP requests to download data (though not directly used in the final CSV loading, it's common for data acquisition).</li>
                        <li>**Alternatives:** <code>urllib</code>, <code>httpx</code>.</li>
                        <li>**Functionality:** Simplifies sending HTTP requests and handling responses.</li>
                    </ul>
                    <h3>7. <code>pandas</code></h3>
                    <ul>
                        <li>**What it is:** A powerful data manipulation and analysis library for Python.</li>
                        <li>**Why used:** Essential for reading and processing the `icdchapter6.csv` file, converting it into a structured DataFrame.</li>
                        <li>**Alternatives:** Polars, Dask.</li>
                        <li>**Functionality:** Data structuring (DataFrames), CSV reading, data cleaning, transformation.</li>
                    </ul>
                </div>
            </section>

            <!-- Section 1: Setup and Installations -->
            <section>
                <h2>1. Setup and Installations</h2>
                <p>First, we need to install the necessary Python libraries.</p>
                <pre><code class="language-bash">!pip install -qU langchain langchain-community langchain-chroma langchain-google-genai python-dotenv requests pandas</code></pre>
                <p>Next, we'll set up API keys. For this lesson, we will use Google's <code>gemma-3-1b-it</code> for the Language Model (LLM) and <code>GoogleGenerativeAIEmbeddings</code> for generating text embeddings. You'll need a Google API key.</p>
                <h3>How to get a Google API Key:</h3>
                <ol>
                    <li>Go to <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>.</li>
                    <li>Click "Get API Key" or "Create API Key in new project".</li>
                    <li>Copy the generated API key.</li>
                </ol>
                <h3>How to get ICD Knowledgebase:</h3>
                <ol>
                    <li>Go to <a href="https://drive.google.com/file/d/1ThIsNf1iuns9wlMZmBHOWRI9E6FiVgjQ/view?usp=drive_link" target="_blank">Drive</a>.</li>
                    <li>Upload the <code>icdchapter6.csv</code> file to your Colab root folder.</li>
                </ol>
            </section>

            <!-- Code Slide: API Key Setup -->
            <section>
                <h2>Code: API Key Setup</h2>
                <div class="scrollable-content">
                    <pre><code data-trim data-noescape class="language-python">
import os
import getpass
from dotenv import load_dotenv

# Load environment variables from .env file if it exists
load_dotenv()

# Get Google API Key
if "GOOGLE_API_KEY" not in os.environ:
    os.environ["GOOGLE_API_KEY"] = getpass.getpass("Enter your Google API Key: ")
                    </code></pre>
                </div>
            </section>

            <!-- Section 2: Acquiring ICD-11 Data from CSV -->
            <section>
                <h2 class="r-fit-text">2. Acquiring ICD-11 Data from CSV</h2>
                <div class="scrollable-content">
                    <p>We will load the ICD-11 data directly from the provided <code>icdchapter6.csv</code> file. This file contains ICD-11 codes, titles, and definitions, separated by semicolons.</p>
                </div>
            </section>

            <!-- Code Slide: load_icd11_from_csv function -->
            <section>
                <h2 class="r-fit-text">Code: Loading ICD-11 Data</h2>
                <div class="scrollable-content">
                    <pre><code data-trim data-noescape class="language-python">
import pandas as pd
from langchain_core.documents import Document

def load_icd11_from_csv(file_path: str) -> list[Document]:
    """
    Loads ICD-11 data from a CSV file and converts it into LangChain Document objects.
    Assumes the CSV has columns like 'Code', 'Title', 'Definition'.

    Args:
        file_path (str): The path to the CSV file.

    Returns:
        list[Document]: A list of LangChain Document objects.
    """
    print(f"Loading ICD-11 data from CSV: '{file_path}'...")
    try:
        # Read the CSV file using pandas, specifying the delimiter
        df = pd.read_csv(file_path, delimiter=';')

        icd_documents = []
        for index, row in df.iterrows():
            code = row["code"]
            title = row["title"]
            definition = row["definition"]
            content = f"ICD-11 Code: {code}\\nTitle: {title}\\nDefinition: {definition}"
            metadata = {"code": code, "title": title,"definition":definition}
            icd_documents.append(Document(page_content=content, metadata=metadata))

        print(f"Successfully loaded {len(icd_documents)} ICD-11 entries from CSV.")
        return icd_documents
    except FileNotFoundError:
        print(f"Error: CSV file not found at '{file_path}'. Please ensure the file is uploaded.")
        return []
    except KeyError as e:
        print(f"Error: Missing expected column in CSV: {e}. Please check CSV headers.")
        print("Expected columns: 'Code', 'Title', 'Definition'")
        return []
    except Exception as e:
        print(f"An unexpected error occurred while reading the CSV: {e}")
        return []

# Load ICD-11 documents from the uploaded CSV file
icd11_documents = load_icd11_from_csv('icdchapter6.csv')

if icd11_documents:
    print("Sample ICD-11 Document (first 100 characters):")
    print(icd11_documents[0].page_content[:100], "...")
    print("Metadata example:")
    print(icd11_documents[0].metadata)
else:
    print("Failed to load ICD-11 documents from CSV. Please check the file path and content.")
                    </code></pre>
                </div>
            </section>

            <!-- Section 3: Processing Documents: No Text Splitting -->
            <section>
                <h2 class="r-fit-text">3. Processing Documents: No Text Splitting</h2>
                <div class="scrollable-content">
                    <p>As each row in the CSV represents a complete disorder entry and should not be split, we will treat each loaded document as a single chunk. This means we will not apply any further text splitting.</p>
                </div>
            </section>

            <!-- Code Slide: No Text Splitting -->
            <section>
                <h2 class="r-fit-text">Code: Document Processing</h2>
                <div class="scrollable-content">
                    <pre><code data-trim data-noescape class="language-python">
# As requested, each document (representing a row/disorder) will be treated as a single chunk.
icd11_chunks = icd11_documents

print(f"\\nOriginal documents count (now also chunk count): {len(icd11_documents)}")
print(f"Each document is now treated as a single chunk.")

if icd11_chunks:
    print("Sample chunk (first 100 characters):")
    print(icd11_chunks[0].page_content[:100], "...")
    print("Sample chunk metadata:")
    print(icd11_chunks[0].metadata)
else:
    print("No chunks available. Please ensure ICD-11 documents were loaded correctly.")
                    </code></pre>
                </div>
            </section>

            <!-- Section 4: Generating Embeddings -->
            <section>
                <h2 class="r-fit-text">4. Generating Embeddings</h2>
                <div class="scrollable-content">
                    <p>Embeddings are numerical representations of text that capture semantic meaning. We'll use these embeddings to find semantically similar chunks when a user asks a question. <code>GoogleGenerativeAIEmbeddings</code> will convert our text chunks into vectors.</p>
                </div>
            </section>

            <!-- Code Slide: Embedding Generation -->
            <section>
                <h2 class="r-fit-text">Code: Embedding Model Initialization</h2>
                <div class="scrollable-content">
                    <pre><code data-trim data-noescape class="language-python">
from langchain_google_genai import GoogleGenerativeAIEmbeddings

# Initialize the embedding model
# The model name 'models/embedding-001' is suitable for generating text embeddings.
# It uses the API key set in the GOOGLE_API_KEY environment variable.
embeddings = GoogleGenerativeAIEmbeddings(model="models/embedding-001")

print("Embedding model initialized.")
# You can optionally test an embedding
# sample_embedding = embeddings.embed_query("What is hypertension?")
# print(f"Sample embedding dimension: {len(sample_embedding)}")
                    </code></pre>
                </div>
            </section>

            <!-- Section 5: Creating or Loading a Persistent Vector Store -->
            <section>
                <h2 class="r-fit-text">5. Creating or Loading a Persistent Vector Store</h2>
                <div class="scrollable-content">
                    <p>A vector store (or vector database) stores the embeddings and allows for efficient similarity search. We'll use <code>Chroma</code> and configure it to persist data to disk. This means if you run this notebook again, it will load the existing vector store instead of re-embedding all documents, saving time.</p>
                </div>
            </section>

            <!-- Code Slide: Chroma Vector Store -->
            <section>
                <h2 class="r-fit-text">Code: Chroma Vector Store Setup</h2>
                <div class="scrollable-content">
                    <pre><code data-trim data-noescape class="language-python">
from langchain_chroma import Chroma
import os

# Define the directory where the vector store will be persisted
persist_directory = "./chroma_db"

# Check if the vector store already exists
if os.path.exists(persist_directory) and os.listdir(persist_directory):
    print(f"Loading existing Chroma vector store from '{persist_directory}'...")
    # If it exists, load it
    vectorstore = Chroma(
        persist_directory=persist_directory,
        embedding_function=embeddings
    )
    print("Chroma vector store loaded successfully!")
else:
    print("Chroma vector store not found or is empty. Creating a new one...")
    # If not, create a new one from the documents
    vectorstore = Chroma.from_documents(
        documents=icd11_chunks,
        embedding=embeddings,
        persist_directory=persist_directory
    )
    print(f"Chroma vector store created and persisted to '{persist_directory}'!")

# To make the vectorstore a retriever that can be used in the RAG chain:
retriever = vectorstore.as_retriever()
print("Retriever created from the vector store.")
                    </code></pre>
                </div>
            </section>

            <!-- Section 6: Building the RAG Chain -->
            <section>
                <h2 class="r-fit-text">6. Building the RAG Chain</h2>
                <div class="scrollable-content">
                    <p>Now, we'll assemble the RAG chain using LangChain. The chain will perform the following steps:</p>
                    <ol>
                        <li><strong>Retrieve:</strong> Given a user query, use the <code>retriever</code> to find the most relevant chunks from our ICD-11 vector store.</li>
                        <li><strong>Stuff:</strong> Combine these retrieved chunks with the original query into a single prompt for the Language Model.</li>
                        <li><strong>Generate:</strong> The Language Model generates a response based on the combined prompt.</li>
                    </ol>
                    <p>We'll use LangChain Expression Language (LCEL) for a clear and flexible chain construction.</p>
                </div>
            </section>

            <!-- Code Slide: RAG Chain Construction -->
            <section>
                <h2 class="r-fit-text">Code: RAG Chain Construction</h2>
                <div class="scrollable-content">
                    <pre><code data-trim data-noescape class="language-python">
from langchain_google_genai import ChatGoogleGenerativeAI
from langchain_core.prompts import ChatPromptTemplate
from langchain_core.output_parsers import StrOutputParser
from langchain_core.runnables import RunnablePassthrough

# Initialize the Language Model (LLM)
llm = ChatGoogleGenerativeAI(model="gemma-3-1b-it", temperature=0.7)

# Define the prompt template for the LLM
template = """You are a helpful assistant for medical information, specifically regarding ICD-11.
Use the following pieces of retrieved context to answer the question.
If you don't know the answer, just say that you don't know.
Keep the answer concise and relevant to the provided ICD-11 context.

Context: {context}

Question: {question}

Answer:"""
prompt = ChatPromptTemplate.from_template(template)

# Construct the RAG chain using LCEL
rag_chain = (
    {"context": retriever, "question": RunnablePassthrough()}
    | prompt
    | llm
    | StrOutputParser()
)

print("RAG chain constructed.")
                    </code></pre>
                </div>
            </section>

            <!-- Section 7: Demonstration & Evaluation -->
            <section>
                <h2 class="r-fit-text">7. Demonstration & Evaluation</h2>
                <div class="scrollable-content">
                    <p>Now, let's test our RAG system with some queries related to medical conditions.</p>
                </div>
            </section>

            <!-- Code Slide: Demonstration and Queries -->
            <section>
                <h2 class="r-fit-text">Code: RAG System Demonstration</h2>
                <div class="scrollable-content">
                    <pre><code data-trim data-noescape class="language-python">
def ask_rag_system(query: str):
    """
    Asks a question to the RAG system and prints the answer.
    """
    print(f"\\n--- Asking: '{query}' ---")
    try:
        response = rag_chain.invoke(query)
        print(f"Answer:\\n{response}")
    except Exception as e:
        print(f"An error occurred: {e}")
        print("Please ensure your Google API Key is valid and that you have sufficient quota.")

# Example Queries
ask_rag_system("What is the ICD-11 code and definition for 'Dissociative identity disorder'?")
ask_rag_system("What is the capital of France?") # This query should ideally result in "I don't know" as it's outside the ICD-11 context.
ask_rag_system("What is the ICD-11 code for 'Anxiety'?") # Test a term that might be less prevalent if max_results was small.
                    </code></pre>
                </div>
            </section>

            <!-- Conclusion and Next Steps -->
            <section>
                <h2>Conclusion and Next Steps</h2>
                <div class="scrollable-content">
                    <p>You have successfully built a basic RAG system using LangChain, drawing information from ICD-11 data.</p>
                    <h3>Key Learnings:</h3>
                    <ul>
                        <li>How to load and prepare unstructured data for RAG.</li>
                        <li>The role of text splitting and embeddings.</li>
                        <li>Creating and using a vector store (Chroma).</li>
                        <li>Connecting an LLM and retriever to form a RAG chain.</li>
                    </ul>
                    <h3>Potential Improvements and Further Exploration:</h3>
                    <ul>
                        <li><strong>Larger Dataset:</strong> Integrate with the full WHO ICD-11 API (requires authentication and more robust data handling) or download a larger pre-processed dataset if available publicly.</li>
                        <li><strong>Advanced Text Splitting:</strong> Experiment with different <code>TextSplitter</code> strategies or add metadata to chunks for improved retrieval.</li>
                        <li><strong>Hybrid Search:</strong> Combine vector similarity search with keyword-based search for better retrieval performance.</li>
                        <li><strong>Reranking:</strong> Implement a reranking step after initial retrieval to ensure the most relevant documents are passed to the LLM.</li>
                        <li><strong>Evaluation Metrics:</strong> Set up evaluation metrics to assess the performance of your RAG system (e.g., faithfulness, relevance).</li>
                        <li><strong>User Interface:</strong> Build a simple web interface (e.g., using Streamlit or Gradio) to interact with the RAG system.</li>
                        <li><strong>Chat History:</strong> Extend the RAG chain to incorporate conversational history for more coherent multi-turn interactions.</li>
                    </ul>
                </div>
            </section>

        </div>
    </div>

    <!-- Reveal.js JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/markdown/markdown.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/notes/notes.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/math/math.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@5.1.0/plugin/zoom/zoom.js"></script>

    <script>
        Reveal.initialize({
            controls: true,
            progress: true,
            hash: true,
            center: true, // Keep content centered within individual slides
            responsive: true, // Enable responsive scaling
            margin: 0.1, // Small margin around slides
            minScale: 0.2, // Minimum scale factor
            maxScale: 2.0, // Maximum scale factor
            preload: true, // Preload images and iframes
            transition: 'slide', // Fading transition for slides
            transitionSpeed: 'fast', // Transition speed

            // Learn about plugins: https://revealjs.com/plugins/
            plugins: [
                RevealMarkdown,
                RevealHighlight,
                RevealNotes,
                RevealMath,
                RevealZoom
            ],

            // Configuration for the scroll-view plugin (custom behavior for vertical overflow)
            // Note: Reveal.js 5.x.x changed how plugins are loaded.
            // There isn't a direct 'scroll-view' plugin in the core.
            // The custom CSS with `overflow-y: auto` handles vertical scrolling within elements.
            // Vertical slides themselves are handled by nested sections.
            // If the user meant a specific plugin, it would need to be linked separately.
            // For now, assume "scroll-view" refers to general vertical scrolling of content.
            keyboard: {
                27: null // disable ESC to avoid issues with Canvas environment
            },
            highlight: {
                beforeHighlight: (hljs) => {
                    // Optional: Add any custom language definitions here
                }
            }
        });

        // Function to ensure code highlighting is applied
        Reveal.on('slidechanged', event => {
            hljs.highlightAll();
        });

        // Initial highlight on load
        hljs.highlightAll();
    </script>
</body>
</html>
